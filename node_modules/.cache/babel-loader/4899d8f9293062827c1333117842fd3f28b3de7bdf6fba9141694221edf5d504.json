{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Pixelate = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Util_1 = require(\"../Util\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Pixelate = function (imageData) {\n  let pixelSize = Math.ceil(this.pixelSize()),\n    width = imageData.width,\n    height = imageData.height,\n    nBinsX = Math.ceil(width / pixelSize),\n    nBinsY = Math.ceil(height / pixelSize),\n    data = imageData.data;\n  if (pixelSize <= 0) {\n    Util_1.Util.error('pixelSize value can not be <= 0');\n    return;\n  }\n  for (let xBin = 0; xBin < nBinsX; xBin += 1) {\n    for (let yBin = 0; yBin < nBinsY; yBin += 1) {\n      let red = 0;\n      let green = 0;\n      let blue = 0;\n      let alpha = 0;\n      const xBinStart = xBin * pixelSize;\n      const xBinEnd = xBinStart + pixelSize;\n      const yBinStart = yBin * pixelSize;\n      const yBinEnd = yBinStart + pixelSize;\n      let pixelsInBin = 0;\n      for (let x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n        for (let y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n          const i = (width * y + x) * 4;\n          red += data[i + 0];\n          green += data[i + 1];\n          blue += data[i + 2];\n          alpha += data[i + 3];\n          pixelsInBin += 1;\n        }\n      }\n      red = red / pixelsInBin;\n      green = green / pixelsInBin;\n      blue = blue / pixelsInBin;\n      alpha = alpha / pixelsInBin;\n      for (let x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n        for (let y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n          const i = (width * y + x) * 4;\n          data[i + 0] = red;\n          data[i + 1] = green;\n          data[i + 2] = blue;\n          data[i + 3] = alpha;\n        }\n      }\n    }\n  }\n};\nexports.Pixelate = Pixelate;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);","map":{"version":3,"names":["Object","defineProperty","exports","value","Pixelate","Factory_1","require","Util_1","Node_1","Validators_1","imageData","pixelSize","Math","ceil","width","height","nBinsX","nBinsY","data","Util","error","xBin","yBin","red","green","blue","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","pixelsInBin","x","y","i","Factory","addGetterSetter","Node","getNumberValidator","afterSetFilter"],"sources":["C:/Users/tharu/Downloads/mini-layout-editor/mini-layout-editor/node_modules/konva/lib/filters/Pixelate.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pixelate = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Util_1 = require(\"../Util\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Pixelate = function (imageData) {\n    let pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), data = imageData.data;\n    if (pixelSize <= 0) {\n        Util_1.Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (let xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (let yBin = 0; yBin < nBinsY; yBin += 1) {\n            let red = 0;\n            let green = 0;\n            let blue = 0;\n            let alpha = 0;\n            const xBinStart = xBin * pixelSize;\n            const xBinEnd = xBinStart + pixelSize;\n            const yBinStart = yBin * pixelSize;\n            const yBinEnd = yBinStart + pixelSize;\n            let pixelsInBin = 0;\n            for (let x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (let y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    const i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (let x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (let y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    const i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nexports.Pixelate = Pixelate;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}